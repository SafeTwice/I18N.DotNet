<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>I18N.DotNet: I18N.DotNet</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">I18N.DotNet<span id="projectnumber">&#160;main@be0cbf</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespaceI18N_1_1DotNet.html">I18N.DotNet</a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md__github_workspace_README"></a> Documentation in PDF format is available <a href="./I18N.DotNet.pdf">here</a>. </p>
<h1><a class="anchor" id="autotoc_md1"></a>
About</h1>
<p ><a class="el" href="namespaceI18N_1_1DotNet.html">I18N.DotNet</a> is a .NET library written in C# to enable simple internationalization (<a class="el" href="namespaceI18N.html">I18N</a>) / localization (L10N) (i.e. translation to different languages) of .NET applications and libraries.</p>
<p >A companion utility <a href="https://github.com/SafeTwice/I18N.DotNet/tree/main/Tool">I18N.DotNet Tool</a> is provided to ease management of translation files.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Installation</h1>
<p >The easiest way to install <a class="el" href="namespaceI18N_1_1DotNet.html">I18N.DotNet</a> is using the NuGet package: <a href="https://www.nuget.org/packages/I18N.DotNet/">https://www.nuget.org/packages/I18N.DotNet/</a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Getting Started</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Adapting Source Code (I18N)</h2>
<p >Source code must be adapted following two simple steps:</p>
<ul>
<li>The first step consists in adding a couple of calls during initialization of the program (before any translated string is used):<ul>
<li>Call <code>I18N.DotNet.Global.Localizer.SetTargetLanguage()</code> to set the language to which strings will be translated.</li>
<li>Call <code>I18N.DotNet.Global.Localizer.LoadXML()</code> to load the file that contains the translations.</li>
</ul>
</li>
<li>The second step consists in adapting the source code in order to wrap the strings to be translated with a call to <code><a class="el" href="classI18N_1_1DotNet_1_1Global.html#a75a861e41bbca8dae718bf3e67c7c988" title="Localizes a string using the global localizer.">I18N.DotNet.Global.Localize()</a></code>.</li>
</ul>
<h5>Example</h5>
<div class="fragment"><div class="line">using static I18N.DotNet.Global;</div>
<div class="line">using System;</div>
<div class="line">using System.IO;</div>
<div class="line">using System.Reflection;</div>
<div class="line"> </div>
<div class="line">public class Program</div>
<div class="line">{</div>
<div class="line">  static void Main( string[] args )</div>
<div class="line">  {</div>
<div class="line">    var programPath = Path.GetDirectoryName( Assembly.GetExecutingAssembly().Location );</div>
<div class="line">    int i = 0x555;</div>
<div class="line"> </div>
<div class="line">    Localizer.SetTargetLanguage( CultureInfo.CurrentUICulture.Name ).LoadXML( programPath + &quot;/I18N.xml&quot; );</div>
<div class="line"> </div>
<div class="line">    Console.WriteLine( Localize( &quot;Plain string to be translated&quot; ) );</div>
<div class="line">    Console.WriteLine( Localize( $&quot;Interpolated string to be translated with value {i:X4}&quot; ) );</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Writing Translations (L10N)</h2>
<p >String translations must be stored in an XML file with root element <code><a class="el" href="namespaceI18N.html">I18N</a></code>.</p>
<p >For each string than has been internationalized an <code>Entry</code> element under the root must be defined, with:</p>
<ul>
<li>A single <code>Key</code> child element which value is the internationalized string defined in the code (replacing for interpolated strings the interpolated expressions with their positional index).</li>
<li><code>Value</code>child elements with their attribute <code>lang</code> set to the target language of the translation and which value is the translated string.</li>
</ul>
<p >The companion utility <a href="Tool/">I18N.DotNet Tool</a> can be used to ease the creation of the translations file by scanning source files and automatically generating entries for discovered internationalized strings.</p>
<h5>Example</h5>
<div class="fragment"><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div>
<div class="line">&lt;I18N&gt;</div>
<div class="line">  &lt;Entry&gt;</div>
<div class="line">    &lt;Key&gt;Plain string to be translated&lt;/Key&gt;</div>
<div class="line">    &lt;Value lang=&quot;es&quot;&gt;String simple a traducir&lt;/Value&gt;</div>
<div class="line">    &lt;Value lang=&quot;fr&quot;&gt;String simple à traduire&lt;/Value&gt;</div>
<div class="line">  &lt;/Entry&gt;</div>
<div class="line">  &lt;Entry&gt;</div>
<div class="line">    &lt;Key&gt;Interpolated string to be translated with value {0:X4}&lt;/Key&gt;</div>
<div class="line">    &lt;Value lang=&quot;es&quot;&gt;String interpolado a traducir con valor {0:X4}&lt;/Value&gt;</div>
<div class="line">    &lt;Value lang=&quot;fr&quot;&gt;String interpolé à traduire avec valeur {0:X4}&lt;/Value&gt;</div>
<div class="line">  &lt;/Entry&gt;</div>
<div class="line">&lt;/I18N&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Advanced Usage</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
Language Identifiers &amp; Variants</h2>
<p >Any arbitrary string can be used for identifying languages, and they are processed as case-insensitive.</p>
<p >When using language identifiers formed by a primary code and a variant code separated by an hyphen (e.g., _"en-us"_, _"es-es"_), if a localized conversion for the language variant is not found then a conversion for the primary (base) language is tried too.</p>
<p >For example, if <code>"en-gb"</code> is passed to <code>Localizer.SetTargetLanguage()</code>, then for each string to be translated a translation for the language _"en-gb"_ will be searched first, and if not found then a translation for the language _"en"_ will be searched next.</p>
<p >It is therefore recommended to:</p>
<ul>
<li>Use primary-variant code (e.g., _"en-us"_, _"es-es"_) as target language identifiers (i.e., as arguments to <code>Localizer.SetTargetLanguage()</code>).</li>
<li>Use primary code (e.g., _"en"_, _"fr"_) as translation language identifiers (i.e, as the <code>lang</code> attribute values of XML <code>I18N.Entry.Value</code> entries) for generic (non variant-specific) translations.</li>
<li>Use primary code-variant (e.g., _"en-gb"_, _"es-ar"_) as translation language identifiers (i.e, as the <code>lang</code> attribute values of XML <code>I18N.Entry.Value</code> entries) for variant-specific translations.</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
String Format</h2>
<p >Calls to <code>String.Format()</code> where the format string has to be internationalized can be replaced by a call to <code><a class="el" href="classI18N_1_1DotNet_1_1Global.html#adcf99559166519298dc697938fe7988d" title="Localizes and then formats a string using the global localizer.">I18N.DotNet.Global.LocalizeFormat()</a></code> (or <code>Localizer.LocalizeFormat()</code>, see Global and Local Localizers).</p>
<h5>Example</h5>
<div class="fragment"><div class="line">String.Format( Localize( &quot;Format string to be translated with value {0}&quot; ), myVar );</div>
<div class="line">// is equivalent to</div>
<div class="line">LocalizeFormat( &quot;Format string to be translated with value {0}&quot;, myVar );</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
Global and Local Localizers</h2>
<p >Instances of the <code>Localizer</code> class are responsible for loading string translations and then providing localization functionality (i.e. perform string translations) for software components.</p>
<p >The static class <code><a class="el" href="classI18N_1_1DotNet_1_1Global.html" title="Utility class for convenient access to localization functions.">I18N.DotNet.Global</a></code> has the property <code>Localizer</code> which contains the global localizer. This instance is shared and can be conveniently used by all software components. In fact all the methods exposed by the <code><a class="el" href="classI18N_1_1DotNet_1_1Global.html" title="Utility class for convenient access to localization functions.">I18N.DotNet.Global</a></code> class are just convenience wrappers that call the global localizer.</p>
<p >If necessary, additional instances of the <code>Localizer</code> class can be created (local localizers), loaded with string translations, and then passed to software components for being used instead of the global localizer. Nevertheless, for most cases using the global localizer is just enough.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Contexts</h2>
<p >Sometimes the same source language string has different translations in different contexts (e.g., English _"OK"_ should be translated in Spanish to _"Aceptar"_ for a button label but to _"Correcto"_ for a successful outcome indication).</p>
<p >Since the source language key is the same in both cases, context partitioning must be used, which affects the source code side and the translations file side.</p>
<h4><a class="anchor" id="autotoc_md11"></a>
Context Partitioning in Source Code (I18N)</h4>
<p >In source code, the context of the key can be explicitly indicated when the string is being internationalized by calling <code><a class="el" href="classI18N_1_1DotNet_1_1Global.html#ac5535631b956276defccc0a32ad401a6" title="Gets a context in the global localizer.">I18N.DotNet.Global.Context()</a></code> (or <code>Localizer.Context()</code>, see Global and Local Localizers) and passing it the context identifier, and then calling the localization methods on the returned context <code>Localizer</code>.</p>
<p >Contexts can be nested. A chain of successively nested contexts can be identified by joining their identifiers using the dot character ('.') as a composite context identifier.</p>
<p >Translations in a context are searched hierarchically: if a translation is not found for the target language in is context (neither for the language variant nor the primary language), then a translation is searched again on its parent context (if it exists).</p>
<h5>Example</h5>
<div class="fragment"><div class="line">Button.Label = Context( &quot;GUI.Button&quot; ).Localize( &quot;OK&quot; );</div>
<div class="line">// ...</div>
<div class="line">TextBox.Text = Context( &quot;GUI&quot; ).Context( &quot;Status&quot; ).Localize( &quot;OK&quot; );</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md12"></a>
Context Partitioning in the Translation File (L10N)</h4>
<p >Context partitioning is performed in the translations XML file using <code>Context</code> elements as children of the root element or nested within other <code>Context</code> elements. These elements must have an <code>id</code> attribute to indicate the context identifier (which can be a composite context identifier), and are containers for the <code>Entry</code> elements that define the translations for that context.</p>
<h5>Example</h5>
<div class="fragment"><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div>
<div class="line">&lt;I18N&gt;</div>
<div class="line">  &lt;Entry&gt;</div>
<div class="line">    &lt;Key&gt;OK&lt;/Key&gt;</div>
<div class="line">    &lt;Value lang=&quot;fr&quot;&gt;O.K.&lt;/Value&gt;</div>
<div class="line">  &lt;/Entry&gt;</div>
<div class="line">  &lt;Context id=&quot;GUI&quot;&gt;</div>
<div class="line">    &lt;Context id=&quot;Button&quot;&gt;</div>
<div class="line">      &lt;Entry&gt;</div>
<div class="line">        &lt;Key&gt;OK&lt;/Key&gt;</div>
<div class="line">        &lt;Value lang=&quot;es&quot;&gt;Aceptar&lt;/Value&gt;</div>
<div class="line">      &lt;/Entry&gt;</div>
<div class="line">    &lt;/Context&gt;</div>
<div class="line">    &lt;Context id=&quot;Button&quot;&gt;</div>
<div class="line">      &lt;Entry&gt;</div>
<div class="line">        &lt;Key&gt;OK&lt;/Key&gt;</div>
<div class="line">        &lt;Value lang=&quot;es&quot;&gt;Correcto&lt;/Value&gt;</div>
<div class="line">      &lt;/Entry&gt;</div>
<div class="line">    &lt;/Context&gt;</div>
<div class="line">  &lt;/Context&gt;</div>
<div class="line">&lt;/I18N&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Embedding the Translations File</h2>
<p >Instead of using translation files installed on the filesystem during the installation procedure for the application, these files can be embedded inside an executable assembly. Embedded resource files can then be accessed as <code>Stream</code> objects which are passed to <code>Localizer.LoadXML</code>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
